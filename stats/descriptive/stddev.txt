(*
 * $ cd <JiecLib Project Root>
 * $ jiecc ./stats/descriptive/stddev.txt -I. -I./vendor/jiecunit/sys -o ./stats/descriptive/stddev.xml -t omron
 *)
{#ifndef __STATS_STDDEV_TXT__}
{#define __STATS_STDDEV_TXT__}

{#include <sys.txt>}
{#include <array/array.txt>}
{#include <stats/descriptive/variance.txt>}

(*{doc 自由度調整可能な標準偏差を計算
@inout data サンプルデータを含む配列。
  正規配列（次元の始点が0で要素数1以上）でなければいけない。
@input n 先頭n個を使用する。
  デフォルト値: -1
@input ddof 自由度補正。
  デフォルト値: 0
@return 計算結果。
@error 入力値が不正な場合。}*)
function Stats_stddev: lreal
	_PROLOGUE_OF_FUNCTION_()
	var_in_out
		(*{doc サンプルデータを含む配列。}*)
		data: array[*] of lreal;
	end
	var_input
		(*{doc 先頭n個を使用する。}*)
		n: dint := -1;
		(*{doc 自由度補正。}*)
		ddof: dint := 0;
	end
	var_temp
		(*{doc 分散。}*)
		v: lreal;
	end
	{st}
	v := Stats_variance_ddof(data:=data, n:=n, ddof:=ddof, eno=>eno);
	if not eno then
		return;
	end_if;
	Stats_stddev := sqrt(v);
	{end}
end

(*{doc 母標準偏差を計算 (ddof=0)
@inout data サンプルデータを含む配列。
  正規配列（次元の始点が0で要素数1以上）でなければいけない。
@input n 先頭n個を使用する。
  デフォルト値: -1
@return 計算結果。
@error 入力値が不正な場合。}*)
function Stats_population_stddev: lreal
	_PROLOGUE_OF_FUNCTION_()
	var_in_out
		(*{doc サンプルデータを含む配列。}*)
		data: array[*] of lreal;
	end
	var_input
		(*{doc 先頭n個を使用する。}*)
		n: dint := -1;
	end
	{st}
	Stats_population_stddev := Stats_stddev(data:=data, n:=n, ddof:=0, eno=>eno);
	{end}
end

(*{doc 標本標準偏差を計算 (ddof=1)
@inout data サンプルデータを含む配列。
  正規配列（次元の始点が0で要素数1以上）でなければいけない。
@input n 先頭n個を使用する。
  デフォルト値: -1
@return 計算結果。
@error 入力値が不正な場合。}*)
function Stats_sample_stddev: lreal
	_PROLOGUE_OF_FUNCTION_()
	var_in_out
		(*{doc サンプルデータを含む配列。}*)
		data: array[*] of lreal;
	end
	var_input
		(*{doc 先頭n個を使用する。}*)
		n: dint := -1;
	end
	{st}
	Stats_sample_stddev := Stats_stddev(data:=data, n:=n, ddof:=1, eno=>eno);
	{end}
end

{#endif}

