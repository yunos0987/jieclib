(*
 * $ cd <JiecLib Project Root>
 * $ jiecc ./test/array/test_array.txt -I./src -I./vendor/jiecunit/sys -I./vendor/jiecunit -o ./test/array/test_array.xml -t omron
 *)
{#include <jiecunit.txt>}
{#include <array/array.txt>}

DEFINE_CONFIGURATION(
	_JIEC_TESTNAMES_LIST_(
		'test_array_size',
		'test_array_isRegular',
		'test_array_isRegular2d',
		'test_array_isRegular2d_x'
	)
)

TEST_S(test_array_size)
	var
		x_1: array[0..0] of lreal;
		x_2: array[0..1] of lreal;
		x_3: array[0..2] of lreal;
		y_1: array[4..4] of lreal;
		y_2: array[4..5] of lreal;
		y_3: array[4..6] of lreal;
	end
	{st}
	EXPECT_EQ_INT32(1, Array_size_lreal(x_1));
	EXPECT_EQ_INT32(2, Array_size_lreal(x_2));
	EXPECT_EQ_INT32(3, Array_size_lreal(x_3));
	EXPECT_EQ_INT32(1, Array_size_lreal(y_1));
	EXPECT_EQ_INT32(2, Array_size_lreal(y_2));
	EXPECT_EQ_INT32(3, Array_size_lreal(y_3));
	{end}
END_TEST_S

TEST_S(test_array_isRegular2d)
	var
		x_regular: array[0..1, 0..2] of lreal;
		x_regular_one: array[0..0, 0..0] of lreal;
		//
		x_nonregular_lb1: array[1..2, 0..1] of lreal;
		x_nonregular_lb2: array[0..1, 2..3] of lreal;
		result: dint;
	end
	{st}
	result := Array_isRegular2d_lreal(x_regular);
	EXPECT_EQ_INT32(6, result);

	result := Array_isRegular2d_lreal(x_regular_one);
	EXPECT_EQ_INT32(1, result);

	result := Array_isRegular2d_lreal(x_nonregular_lb1);
	EXPECT_EQ_INT32(0, result);

	result := Array_isRegular2d_lreal(x_nonregular_lb2);
	EXPECT_EQ_INT32(0, result);
	{end}
END_TEST_S

TEST_S(test_array_isRegular2d_x)
	var
		x_regular: array[0..1, 0..2] of lreal;
		x_nonregular_lb1: array[1..2, 0..2] of lreal;
		x_nonregular_lb2: array[0..1, 2..4] of lreal;
		result: dint;
	end
	{st}
	result := Array_isRegular2d_x_lreal(x_regular, 1);
	EXPECT_EQ_INT32(2, result);

	result := Array_isRegular2d_x_lreal(x_regular, 2);
	EXPECT_EQ_INT32(3, result);

	result := Array_isRegular2d_x_lreal(x_nonregular_lb1, 1);
	EXPECT_EQ_INT32(0, result);

	result := Array_isRegular2d_x_lreal(x_nonregular_lb1, 2);
	EXPECT_EQ_INT32(3, result);

	result := Array_isRegular2d_x_lreal(x_nonregular_lb2, 1);
	EXPECT_EQ_INT32(2, result);

	result := Array_isRegular2d_x_lreal(x_nonregular_lb2, 2);
	EXPECT_EQ_INT32(0, result);

	result := Array_isRegular2d_x_lreal(x_regular, 0);
	EXPECT_EQ_INT32(0, result);

	result := Array_isRegular2d_x_lreal(x_regular, 3);
	EXPECT_EQ_INT32(0, result);
	{end}
END_TEST_S

TEST_S(test_array_isRegular)
	var
		x_regular: array[0..4] of lreal;
		x_regular_zero: array[0..0] of lreal;
		//
		x_nonregular: array[1..5] of lreal;
		x_nonregular_one: array[2..2] of lreal;
		//x_nonregular2: array[-2..2] of lreal;
		//x_empty: array[0..-1] of lreal;
		result: dint;
	end
	{st}
	result := Array_isRegular_lreal(x_regular);
	EXPECT_EQ_INT32(5, result);

	result := Array_isRegular_lreal(x_regular_zero);
	EXPECT_EQ_INT32(1, result);

	result := Array_isRegular_lreal(x_nonregular);
	EXPECT_EQ_INT32(0, result);

	result := Array_isRegular_lreal(x_nonregular_one);
	EXPECT_EQ_INT32(0, result);

	//result := Array_isRegular_lreal(x_nonregular2);
	//EXPECT_EQ_INT32(0, result);

	//result := Array_isRegular_lreal(x_empty);
	//EXPECT_EQ_INT32(0, result);
	{end}
END_TEST_S
